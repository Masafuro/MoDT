# MoDT Broker 管理ガイド

このディレクトリは、MoDTシステム全体の通信の核となるMQTTブローカー（Mosquitto）を管理するための場所です。共通のネットワーク基盤を構築し、各ユニット間のメッセージのやり取りを仲介する役割を果たします。

## 起動方法とトラブルシューティング

ブローカーを起動するには、このディレクトリで以下のコマンドを実行してください。
> docker-compose up -d

もし起動時に、ネットワークが既に存在している、あるいはラベルが正しくないといった警告やエラーが表示された場合は、以前の古いネットワーク設定がシステムに残っている可能性があります。その際は、一度以下のコマンドを実行して既存のネットワークを強制的に削除してから、再度上記の起動コマンドを試みてください。
> docker network rm modt-network

## 停止方法

ブローカーを停止させ、作成されたネットワークなどのリソースを完全に削除したい場合は、以下のコマンドを使用します。
> docker-compose down

## 稼働状況の確認方法

ブローカーが正常に起動しているか、あるいは正しく停止してリソースが解放されたかを確認するには、以下のコマンドでコンテナとネットワークの状態をそれぞれチェックしてください。
> docker ps
> docker network ls

コンテナ一覧に modt-broker が表示され、かつネットワーク一覧に modt-network が存在していれば正常に稼働しています。逆に、停止操作の後にこれらが一覧から消えていれば、クリーンアップは完了しています。